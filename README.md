# Lattice Light-Sheet Microscope (LLSM) Pipeline

This repository contains pipeline code for handling AIC's LLSM data. The pipeline consists of four discrete steps: (1) darkfield correction, (2) deskewing, (3) deconvolution, and (4) maximum intensity projection. The pipeline is accessed via the command line using the `llsm-pipeline` command. Each pipeline step is written as a C++ header, and they can be directly executed using the `darkfield`, `deskew`, `decon`, or `mip` commands. Use the `-h` option with any command to get a list of supported arguments.

## Dependencies

* Cimg >= 2.6.2
* boost-program-options >= 1.73.0
* boost-filesystem >= 1.73.0
* OpenMP
* Python >= 3.8.2
* CMake

The pipeline assumes that all LLSM settings files have been generated by *v4.04505.Development* of the LLSM control software. Settings files generated by different versions of the LLSM control software are not likely to be parsed correctly by our parsing routine.

## Installation

The LLSM pipeline was purpose built to run on the Janelia cluster. However, only minor modifications should be needed to build the pipeline on your own system. We recommend using VCPKG to install the necessary dependencies.

```bash
vcpkg install itk boost-program-options boost-filesystem
```

Once the dependencies are installed, use CMake to build the binaries.

## Darkfield Correction

TODO

## Deskew

The `deskew` function performs an affine transformation on the raw LLSM data to correct the shearing of the data during acquisition. 

## Deconvolution

TODO

## Maximum Intensity Projection (MIP)

TODO
